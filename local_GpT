import tkinter as tk
import ollama

root = tk.Tk()
root.geometry('400x400')
root.title('üí¨ My Local GPT')

# üé® Colors and Fonts
BG_COLOR = "#1e1e1e"
TEXT_COLOR = "#ffffff"
ENTRY_BG = "#2c2c2c"
BUTTON_BG = "#4CAF50"
BUTTON_FG = "#ffffff"
FONT_MAIN = ("Segoe UI", 11)
FONT_TITLE = ("Segoe UI", 13, "bold")

root.config(bg=BG_COLOR)

# üß± Frame to hold widgets
frame = tk.Frame(root, bg=BG_COLOR)
frame.pack(expand=True, fill="both", padx=10, pady=10)

# ü™∂ Title
title_label = tk.Label(frame, text="ü§ñ My Local GPT", fg="#00ffff", bg=BG_COLOR, font=FONT_TITLE)
title_label.pack(pady=(0, 10))

# üó®Ô∏è Response label
mylabel = tk.Label(frame, text="Hello! Ask me something.", fg=TEXT_COLOR, bg=BG_COLOR, wraplength=350, justify="left",
                   font=FONT_MAIN)
mylabel.pack(pady=10)

# ‚úèÔ∏è Entry field
entry = tk.Entry(frame, font=FONT_MAIN, bg=ENTRY_BG, fg=TEXT_COLOR, insertbackground=TEXT_COLOR, relief="flat")
entry.pack(fill="x", pady=10, ipady=5)

# üöÄ Button
send = tk.Button(frame, text="SEND", bg=BUTTON_BG, fg=BUTTON_FG, font=FONT_MAIN, activebackground="#45a049",
                 relief="flat")
send.pack(pady=5, ipadx=10, ipady=5)


def response(event):
    question = entry.get().strip()
    if not question:
        return

    mylabel.config(text="Thinking...")
    root.update_idletasks()

    print("USER:", question)

    try:
        answer = ollama.generate(
            model="gemma3:1b",
            prompt=question,
        )

        print("ASSISTANT:", answer['response'])
        mylabel.config(text=answer['response'])
    except Exception as e:
        mylabel.config(text=f"‚ö†Ô∏è Error: {e}")


# üîó Bind click and Enter key
send.bind("<Button-1>", response)
entry.bind("<Return>", response)

root.mainloop()
